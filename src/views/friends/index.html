<div class="section passenger-section passenger-wrapper">
  <h2>{{user.firstName}}'s Friends List</h2>

  <a  class="button festival-button update-button" ng-if="user.userFriends.length > 0 || user.pendingFriends.length > 0" ng-click=reloadRoute()>Update</a>


  <div class="passenger-panels add-shadow" ng-if="user._id === currentUser()._id" ng-repeat="pendingFriend in user.pendingFriends">

    <div class="passenger-text-wrapper">

      <img class="passenger-profile-picture-2" ng-src="{{ pendingFriend.image }}" alt="{{ pendingFriend.firstName }}">

      <p class="has-text-white passenger-index-text indent"><b>{{ pendingFriend.firstName }} {{ pendingFriend.lastName }}</b> wants to be friends</p>

    </div>

    <a ng-if="pendingFriend.userFriends.includes(currentUser()._id)" ng-click="acceptFriendRequest(pendingFriend._id)" class="button festival-button accept-button">Accept</a>

    <a ng-if="pendingFriend.userFriends.includes(currentUser()._id)"  ng-click="rejectFriendRequest(pendingFriend._id)" class="button festival-button reject-button">Reject</a>

  </div>

<div class="" ng-repeat="friend in user.userFriends">
  <div class="passenger-panels add-shadow" ng-if="friend.userFriends.includes(user._id)">

    <div class="passenger-text-wrapper-2" >

      <p class="has-text-white passenger-index-text indent"><b>{{ friend.firstName }} {{ friend.lastName }}</b> is friends with {{ user._id === currentUser()._id ? 'you' : user.firstName }} </p>


      <img class="passenger-profile-picture-2" ng-src="{{ friend.image }}">

      <a ng-click="addFriend(friend._id)" class="button festival-button remove-button" ng-if="!friend.userFriends.includes(currentUser()._id)">Add friend</a>

      <a ng-click="removeFriend(friend._id)" class="button festival-button remove-button" ng-if="friend.pendingFriends.includes(currentUser()._id)">Pending - cancel?</a>

      <a ng-if="friend.userFriends.includes(currentUser()._id)" ng-click="removeFriend(friend._id)" class="button festival-button">Unfriend</a>
    </div>
  </div>

</div>




  </div>

</div>
